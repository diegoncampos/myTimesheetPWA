<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title *ngIf="!searchMode">My Timesheet</ion-title>
    <ion-title *ngIf="searchMode">Search Result</ion-title>

    <ion-buttons slot="end" (click)="presentAlertSearch()" *ngIf="!searchMode">
      <ion-button>
        <ion-icon slot="icon-only" name="search"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="end" (click)="finishSearch()" *ngIf="searchMode">
      <ion-button>
        <ion-icon slot="icon-only" name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="background">

  <div class="fromToDates">
    <div class="col">
      <strong id="from">From: {{weekInfo.from | date: 'dd/MM/yyyy'}}</strong>
    </div>
    <div class="col">
      <strong id="to">To: {{weekInfo.to | date: 'dd/MM/yyyy'}}</strong>
    </div>
  </div>
  <div class="totalHours">
    <strong id="total">Total hours: {{weekInfo.totalHours |  number : '1.2-2'}}</strong>
  </div>
  <div class="totalHours">
    <strong id="total">Total production: {{weekInfo.totalProd |  number : '1.2-2'}}</strong>
  </div>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed" #fab *ngIf="!searchMode">
    <ion-fab-button>
      <ion-icon name="add" (click)="addTime()"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <ion-fab vertical="bottom" horizontal="start" slot="fixed" #fab>
    <ion-fab-button color="secondary">
      <ion-icon name="share-social-outline" (click)="share()"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <div class="content">
    <ion-icon name="chevron-back-outline" (click)="previousWeek()" *ngIf="!searchMode"></ion-icon>

    <ion-spinner name="dots" *ngIf="data === undefined || data.times.length == 0 || currentWeek === undefined" class="homeSpinner"></ion-spinner>

    <ion-card (swipeleft)="nextWeek()"  (swiperight)="previousWeek()">
      <!-- <ion-card-header>
        <ion-card-subtitle>Card Subtitle</ion-card-subtitle>
        <ion-card-title>Card Title</ion-card-title>
      </ion-card-header> -->

      <ion-label id="noContent" *ngIf="currentWeek !== undefined && currentWeek.length == 0">No Data Entry This Week</ion-label> <br>
      <ion-label id="noContent" *ngIf="currentWeek !== undefined && currentWeek.length == 0">¯\_(ツ)_/¯</ion-label>

      <ion-card-content>
        <ion-list>
          <div *ngFor="let time of currentWeek; let $index=index;">
            <ion-item id="listDate" color="light">
              <ion-label>{{time.date | date: 'EE dd MMM yyyy'}}</ion-label>
            </ion-item>

            <ion-item *ngIf="time.byProd">
              <ion-label><b>Quantity:</b></ion-label>
              <ion-label>{{time.quantity |  number : '1.2-2'}}</ion-label>
            </ion-item>

            <ion-item id="listTimes" *ngIf="!time.byProd">
              <b>From:</b> <ion-label>{{time.startTime | date: 'HH:mm'}}</ion-label>
              <b>To:</b> <ion-label>{{time.endTime | date: 'HH:mm'}}</ion-label>
              <b>Total: </b> <ion-label>{{totalDayTime(time.startTime, time.endTime) |  number : '1.2-2'}} Hs</ion-label>
            </ion-item>

            <ion-item-options side="end">
              <ion-item-option (click)="false">Edit</ion-item-option>
            </ion-item-options>
          </div>
        </ion-list>

      </ion-card-content>
    </ion-card>

    <ion-icon name="chevron-forward-outline" (click)="nextWeek()" *ngIf="!searchMode"></ion-icon>

  </div>

</ion-content>